---
title: "R Notebook"
output: html_notebook
---

```{r libraries, include = FALSE}
library(tidyverse)
library(scales)
library(readxl)
```

### Data used

Download electoral data from 2015 election and from EU referendum
```{r data}
if (!file.exists("electionResults2015.xlsx")) {
  download.file("http://www.electoralcommission.org.uk/__data/assets/excel_doc/0011/189623/2015-UK-general-election-data-results-WEB.xlsx", "electionResults2015.xlsx")
}
if (!file.exists("referendumResults2016.csv")) {
  download.file("http://www.electoralcommission.org.uk/__data/assets/file/0014/212135/EU-referendum-result-data.csv",  "referendumResults2016.csv")
}

```

### Select and tidy data

```{r selectData}
candidates <- read_excel("electionResults2015.xlsx", sheet = 2)
constituency <- read_excel("electionResults2015.xlsx", sheet = 3)
results <- read_excel("electionResults2015.xlsx", sheet = 4)
partyNames <- read_excel("electionResults2015.xlsx", sheet = 5)

allData <- 
  left_join(
    constituency, 
    dplyr::select(results, -one_of(names(results)[1:4], names(results)[6:9]))
  )

```
Add a new chunk by clicking the *Insert Chunk* button on the toolbar or by pressing *Cmd+Option+I*.

When you save the notebook, an HTML file containing the code and output will be saved alongside it (click the *Preview* button or press *Cmd+Shift+K* to preview the HTML file).
